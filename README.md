<h1 align="center">SnakeGame on LED cube</h1>

## Описание

В рамках МКР объектом разработки является игра «Змейка», реализованная на кубе из светодиодов. Целью работы данной МКР являлось создание объекта, на котором можно будет играть в игру «Змейка». Управление «Змейкой» происходит при помощи контроллера Dualshock 2. Помимо реализации популярной игры на этом объекте возможно воспроизведение различных визуальных рядов при помощи светодиодов и других игр, например, «Тетрис», арканоид и др.

В связи со сложившимися обстоятельствами во всем мире и наступлением пандемии COVID-19 поставленные задачи в рамках МКР были упрощены: необходимо было использовать одноцветные светодиоды и без реализации физической модели написать программную часть МКР, управление осуществляется кнопками.

В разделе "Планы ну будущее" описаны дальнейшие действия после улучшения ситуациия с COVID-19.

## Как играть

<p align="center"><img src="https://github.com/ro-SH/LEDcube_SnakeGame/blob/master/Raw/LCD.png"></p>

После запуска программы на LCD экране появляется надпись "Press SEL to start", являющаяся подсказкой как начать игру. При нажатии кнопки "SEL" запускается игра.

Она продолжается до тех пор, пока не наступит одно из событий, ведущих к проигрышу и возвращающих на главный экран: змейка покидает куб, либо врезается в саму себя. После первой игры и всех последующих сыгранных в данной сессии игр, на главном экране появится счёт последней сыгранной игры.

<p align="center"><img src="https://github.com/ro-SH/LEDcube_SnakeGame/blob/master/Raw/buttons.png"></p>

Управление осуществляется с помощью четырёх кнопок: "UP", "DOWN", "LEFT", "RIGHT".

Если змейка находится в горизонтальной плоскости, нажатие "UP" приводит к повороту наверх, нажатие "DOWN" - вниз, при нажатии "LEFT" змейка поворачивает против часовой стрелки, "RIGHT" - по часовой. Если змейка находится в вертикальной плоскости, при нажатии "UP" змейка повернёт против оси X, "DOWN" - по оси X. Если змейка движется вверх по оси Z, при нажатии "LEFT" она повернётся вдоль оси Y, "RIGHT" - против оси Y. Если змейка движется вниз по оси Z, при нажатии "LEFT" она повернётся против оси Y, "RIGHT" - по оси Y.

## Запуск проекта

Для запуска проекта понадобятся:
- [Плата Milandr 1986ВЕ92У](https://ic.milandr.ru/products/programmno_otladochnye_sredstva/otladochnye_komplekty/otladochnyy_komplekt_dlya_mikrokontrollera_1986ve92u_k1986ve92qi/)
- Программатор J-LINK
- Кабель и блок питания
- Светодиодный куб
- Персональный компьютер или ноутбук, имеющий USB-порт
- Установленный драйвер JLink
- [Среда разработки Keil uVision 5](https://www.keil.com/download/product/)

Для подготовки отладочной платы к работе необходимо выполнить следующие
действия:
1. Отсоединить от платы дополнительные провода и детали, если таковые
подключены к разъемам Х26 и Х27.
2. Соединить программатор J-LINK и USB-кабель между собой.
3. Подключить шлейф программатора к разъему JTAG-B, расположенному на
плате (обратите внимание на специальную направляющую, исключающую неправильное
подключение).
4. Убедиться, что переключатели выбора режима загрузки установлены в положение «0-0-0», что соответствует использованию интерфейса JTAG-B
при загрузке и отладке.
5. Подключить USB-кабель программатора к свободному USB-порту компьютера. На программаторе должен загореться светодиод.
Если светодиод все время мигает, то это означает некорректную связь между компьютером и программатором. Чаще всего такая проблема возникает ввиду отсутствия необходимого драйвера.
6. Убедиться, что перемычка POWER_SEL установлена в положение EXT_DC (внешний источник питания). При необходимости переставить ее в это положение (при другом положении перемычки будет использовано питание со стороны USB-интерфейса).
7. Включить блок питания в сетевую розетку и подключить шнур питания к соответствующему разъему на плате. На плате должен загореться красный светодиод POWER 5V. Если в микроконтроллере уже содержится программа, то она начнет выполняться.

Если в микроконотроллер не загружена программа нужно выполнить следующие действия:
1. Открыть проект в Keil uVision, запустив файл с расширение .uvprojx
2. Загрузить программу в память микроконтроллера командой Flash - Download (кнопка F8 на клавиатуре).

## Создано с помощью

- [Российская плата Milandr 1986ВЕ92У](https://github.com/ro-SH/LEDcube_SnakeGame/blob/master/Raw/milandr.png)
- [Keil uVision 5 IDE](https://github.com/ro-SH/LEDcube_SnakeGame/blob/master/Raw/keil.png), используя язык C.

## Описание файлов проекта

- Listings - параметры формируемого листинга и карты проекта.
- Objects - 
- Raw - вспомогательные изображения
- RTE - 
- btn - модуль, содержащий функции инциализации портов кнопок и потоки опроса.
- lcd - библиотчный модуль для работы с LCD экраном.
- led - модуль работы с светодиодами
- link - модуль, соединяющий остальные модули
- main - модуль запуска программы
- rtos - модуль инициализации операционной системы реального времени
- snake - модуль, реализующий алгоритм игры

## Планы на будущее

- После пандемии COVID-19 доработать аппаратную часть, реализовать управление с помощью контроллера Dualshock 2
- Реализовать другие визуальные модели на светодиодном кубе

## Авторы

[Лежнёв Евгений Владимирович](https://github.com/evgenii-lezhnev) - научный руководитель.

[Карманова Кристина](https://github.com/Kkrisss) - программа включения выборочного светодиода в трехмерной матрице светодиодов.

[Курочкин Роман](https://github.com/dlinniyvintagniy) - реализация текущей аппаратной части.

[Шадько Роман](https://github.com/ro-SH) - алгоритм игры «Змейка» в трехмерном пространстве и управление.
